<!DOCTYPE html>
<html>
  <!-- Document Head -->
  <head>
    <base target="_top">
    <!-- Add the Google Apps Script CSS file -->
    <link rel="stylesheet" href="https://ssl.gstatic.com/docs/script/css/add-ons1.css">
    <!-- our friendly neighborhood bootstrap css -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">      

  </head>
  
  <!-- Document Body -->
  <body>
  
  
  
<!--?!= include('esText'); ?>  <!-- proof of concept: header-->
<!-- Object structure: parent -- object { title; text; cite } where title is a string and the others are arrays -->
   <? var dataKeys = getDataKeys(esText); ?>
   <? var data = getData(esText); ?>
   <? var total = dataKeys.length; ?>
    
    <!-- for each object in data -->
      <? for (var i = 0; i < dataKeys.length; i++) { ?>
      <div class="m-2 p-2 alert alert-secondary text-center">
     <h5><?= data[dataKeys[i]].title; ?></h5>
  </div>
    
    <div class="ml-2 mr-2 mt-2 mb-2 alert alert-success">
    <? var myText =data[dataKeys[i]].text; ?>
    <? for (var j = 0; j < myText.length; j++) { ?>
    <p>    <?!= myText[j]; ?></p>
    <? } ?>
    
        <div class="text-center mt-3 ml-3 mr-3 mb-3">
    <button class="action" onclick="google.script.run.<?!= data[dataKeys[i]].tFxn; ?>()">Insert Text At Cursor</button>    
    </div>
    
     </div>
    

    
    <div class="ml-1 mr-1">
    <ul>
    <? var myCites = data[dataKeys[i]].cite; ?>
    <? for (var k = 0; k < myCites.length; k++) { ?>
    <li><small><?!= myCites[k]; ?></small></li>
    <? } ?>
    </ul></div>
    
   <div class="text-center mt-3 ml-3 mr-3 mb-3">
    <button class="action" onclick="google.script.run.<?!= data[dataKeys[i]].cFxn; ?>()">Insert Citation At Cursor</button>    
    </div>
        
      <? } ?>
   
    
    
    
  
    
    
    
  </body>
    
  

</html>